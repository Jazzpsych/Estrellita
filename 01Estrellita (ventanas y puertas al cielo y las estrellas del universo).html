<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para mi Estrellita 🌟</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #fce4ec;
            color: #333;
            margin: 0;
            padding: 10px;
        }
        h1 {
            color: #d81b60;
            margin: 10px 0;
        }
        select, button, input {
            padding: 8px;
            margin: 5px;
            font-size: 16px;
        }
        #mensaje, #poema {
            font-size: 20px;
            margin-top: 15px;
            font-weight: bold;
            color: #880e4f;
        }
        #poema {
            font-style: italic;
            white-space: pre-wrap;
        }
        .imagenes-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 15px;
        }
        .imagen-item {
            margin-bottom: 15px;
        }
        .imagen-item img {
            width: 100%;
            max-width: 300px;
            border-radius: 5px;
        }
        .imagen-emojis {
            margin-top: 5px;
            font-size: 20px;
        }
        .imagen-emojis a {
            text-decoration: none;
            color: #d81b60;
            margin-left: 10px;
        }
        .imagen-emojis a:hover {
            color: #880e4f;
        }
        .mensaje-item {
            text-align: left;
            margin: 8px 0;
            padding: 5px;
            background-color: #f8f8f8;
            border-radius: 5px;
        }
        #loginError {
            color: red;
        }
        #contenido {
            max-width: 600px;
            margin: 0 auto;
        }
        .password-container {
            position: relative;
            display: inline-block;
        }
        #togglePassword {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            cursor: pointer;
        }
        .contador-emociones {
            margin: 15px auto;
            text-align: left;
            max-width: 400px;
            background-color: #f8bbd0;
            padding: 10px;
            border-radius: 10px;
            display: none;
        }
        .contador-item {
            margin: 5px 0;
            display: flex;
            justify-content: space-between;
        }
        .contador-label {
            font-weight: bold;
            color: #880e4f;
        }
        .contador-valor {
            font-weight: bold;
            background-color: white;
            padding: 2px 8px;
            border-radius: 10px;
            min-width: 30px;
            text-align: center;
        }
        #mensajeInput {
            width: 70%;
            resize: vertical;
            min-height: 40px;
            max-height: 100px;
        }
        .historial-item {
            margin: 5px 0;
            padding: 5px;
            background-color: #f8f8f8;
            border-radius: 5px;
        }
        #admin-info {
            background-color: #e8f5e9;
            border: 1px solid #81c784;
            padding: 10px;
            margin: 10px 0;
            text-align: left;
            border-radius: 5px;
            display: none;
        }
        .chat-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        #chat {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            height: 60vh;
            padding: 10px;
            width: 100%;
            box-sizing: border-box;
        }
        .input-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin-top: 5px;
            padding: 0 10px;
            box-sizing: border-box;
        }
        #enviarMensaje {
            margin-left: 5px;
        }
        @media (max-width: 600px) {
            body { padding: 5px; }
            h1 { font-size: 24px; }
            select, button, input { padding: 6px; margin: 3px; font-size: 14px; }
            #mensaje, #poema { font-size: 18px; }
            #chat { height: 50vh; }
            #mensajeInput { width: 65%; min-height: 30px; font-size: 14px; }
            #enviarMensaje { padding: 6px 10px; font-size: 14px; }
            .input-container { margin-top: 3px; }
            .contador-emociones { max-width: 100%; padding: 8px; }
            #historial-container { max-height: 150px; }
            .imagen-item { margin-bottom: 10px; }
            .imagen-item img { max-width: 250px; }
            .imagen-emojis { font-size: 18px; }
        }
    </style>
</head>
<body>
    <h1>Para mi Estrellita 🌟</h1>

    <div id="loginContainer">
        <h2>Iniciar Sesión</h2>
        <input type="email" id="email" placeholder="Correo electrónico" required>
        <div class="password-container">
            <input type="password" id="password" placeholder="Contraseña" required>
            <button type="button" id="togglePassword">👁</button>
        </div>
        <button id="login">Iniciar sesión</button>
        <p id="loginError"></p>
    </div>

    <div id="contenido" style="display: none;">
        <button id="logout" style="background-color: red; color: white; padding: 10px; border: none; cursor: pointer;">Cerrar Sesión</button>

        <div id="admin-info">
            <h3>Panel de administrador</h3>
            <p id="usuario-actual-info">Usuario actual: <strong id="usuario-nombre">No detectado</strong></p>
            <p id="admin-status-info">Estado de administrador: <strong id="admin-status">No</strong></p>
        </div>

        <p>¿Cómo te sientes hoy, mi niña?</p>
        <select id="emocion">
            <option value="feliz">Feliz 😊</option>
            <option value="triste">Triste 😔</option>
            <option value="estresada">Estresada 😵‍💫</option>
            <option value="cansada">Cansada 🥱</option>
            <option value="extrañandote">Extrañándote 🥺</option>
            <option value="pensandoEnTi">Pensando en ti 💭❤️</option>
            <option value="conGanasDeVerte">Con ganas de verte 🥰</option>
            <option value="conGanasDePensar">Con ganas de "pensar" 😏</option>
        </select>
        <button onclick="mostrarMensaje()">Ver mensaje</button>
        <button onclick="mostrarPoema()">Poema del día</button>
        <p id="mensaje"></p>
        <p id="poema"></p>

        <div id="contador-emociones" class="contador-emociones">
            <h3>Contador de Emociones ❤️</h3>
            <div id="contadores-container"></div>
        </div>

        <div id="historial-emociones" class="contador-emociones">
            <h3>Historial de Emociones ⏱️</h3>
            <div id="historial-container" style="max-height: 200px; overflow-y: auto;"></div>
        </div>

        <div class="imagenes-container">
            <div class="imagen-item">
                <img src="https://i.imgur.com/8jWcK6P.png" alt="Piano con notas musicales">
                <div class="imagen-emojis">
                    <span>❤️</span>
                    <a href="https://youtu.be/M7k5tjw3-0M" target="_blank">🎵❤️</a>
                </div>
            </div>
            <div class="imagen-item">
                <img src="https://i.imgur.com/qO3JLoN.jpeg" alt="Estrellita especial">
                <div class="imagen-emojis">
                    <span>❤️</span>
                    <a href="https://www.youtube.com/watch?v=ITbjjKDDSO0&pp=ygUgbGEgbWVqb3IgdmVyc2nDs24gam9zZSB5IGVsIHRvcm8%3D" target="_blank">🎵❤️</a>
                </div>
            </div>
        </div>

        <h2>Chat con Estrellita 💬</h2>
        <div class="chat-container">
            <div id="chat"></div>
            <div class="input-container">
                <textarea id="mensajeInput" placeholder="Escribe un mensaje..." rows="2"></textarea>
                <button id="enviarMensaje">Enviar</button>
            </div>
        </div>
    </div>

    <script>
        const frases = {
            feliz: [
                "Me encanta saber que estás feliz, mi niña. Siempre quiero verte así. 🌸",
                "Tu felicidad es mi felicidad. Que nunca te falte una sonrisa. 😊",
                "Hoy el sol brilla más porque tú estás feliz. ☀️💖",
                "No hay nada que me haga más feliz que verte sonreír. 💫",
                "Quisiera guardar este momento en un frasco y abrirlo cuando lo necesitemos. 🎀",
                "Cuando eres feliz, haces del mundo un lugar mejor. 🌍✨",
                "Si tu alegría tuviera sonido, sería mi canción favorita. 🎶💖",
                "Disfruta este momento, porque te lo mereces. 💕",
                "Cada risa tuya es un regalo para mí. 🎁😊",
                "Me encanta la forma en que iluminas todo con tu alegría. ✨",
                "Que este día sea solo el comienzo de una larga felicidad. 💛",
                "Estar feliz es como volar sin alas, ¿verdad? 🕊️",
                "Recuerda siempre estos momentos y guárdalos en tu corazón. 💖",
                "Si supieras lo hermosa que te ves cuando sonríes... 🥰",
                "Ojalá pudiera congelar este instante y guardarlo para siempre. ❄️❤️",
                "Mi deseo es que nunca pierdas esa luz que llevas dentro. 🌟",
                "Que cada día sea más brillante que el anterior. ✨🌈",
                "Tu felicidad es contagiosa, y me encanta ser contagiado. 😆💖",
                "No importa lo que pase, siempre hay motivos para sonreír. 😊",
                "Hoy es un día perfecto porque tú lo hiciste así. 🌷💖",
                "Que cada paso que des esté lleno de alegría. 🚀",
                "Sonríe, porque te mereces toda la felicidad del mundo. 😍",
                "Si el mundo tuviera más personas como tú, sería un mejor lugar. 🌎💖",
                "Qué bonito es verte tan radiante. 🌞✨",
                "La felicidad es un camino, y tú lo recorres con gracia. 🚶‍♀️💛",
                "Vive el momento, porque la felicidad está en los pequeños detalles. 🎈",
                "Me siento afortunado de compartir tu felicidad. 💕",
                "Un día lleno de alegría es un día bien vivido. 🌸",
                "Que tu sonrisa nunca se apague, porque ilumina mi mundo. 💖",
                "No dejes que nada ni nadie apague esta felicidad. ¡Brilla! 🌟"
            ],
            triste: [
                "Recuerda que, pase lo que pase, siempre estaré para ti. 💕",
                "Las nubes pasan, pero el cielo sigue ahí. Y yo también estaré siempre contigo. 🌧️❤️",
                "Si estás triste, piensa en lo mucho que significas para mí. 💖",
                "No importa la tormenta, el sol siempre vuelve a brillar. ☀️",
                "A veces, llorar también es parte de sanar. Estoy aquí para ti. 💙",
                "Te mando un abrazo que dure hasta que vuelvas a sonreír. 🤗💖",
                "No tienes que ser fuerte todo el tiempo. Está bien sentirse así. 💕",
                "Aunque no lo parezca, este momento difícil pasará. 🌈",
                "Si necesitas un hombro en el que apoyarte, siempre tendrás el mío. 💛",
                "Me gustaría poder quitarte toda la tristeza con un solo abrazo. 🫂",
                "Respira hondo y recuerda lo fuerte que eres. 🌸",
                "No hay tristeza eterna, solo momentos que nos enseñan. 💖",
                "Aunque no lo creas, todo esto tiene un propósito. 🌟",
                "Cuando todo se sienta oscuro, piensa en la luz que llevas dentro. 🔥",
                "Incluso la noche más larga tiene su amanecer. 🌅",
                "Recuerda cuánto has logrado y lo increíble que eres. 💕",
                "Si supieras lo mucho que vales, nunca estarías triste. 💖",
                "Eres más fuerte de lo que crees, y yo creo en ti. 🌸",
                "Siempre hay un nuevo comienzo esperando por ti. 💫",
                "No estás sola. Aquí estoy, contigo. 💕"
            ],
            estresada: [
                "Respira hondo, mi amor. Todo estará bien. 💕",
                "No tienes que hacerlo todo de una vez, paso a paso. 🦋",
                "Cierra los ojos por un momento y deja que el estrés se disuelva. ✨",
                "Incluso las tormentas más fuertes pasan, y esta también lo hará. ⛈️",
                "Si el mundo pesa demasiado, deja que comparta la carga contigo. 💛",
                "Hoy puede ser difícil, pero eres más fuerte de lo que crees. 💪",
                "No dejes que el estrés te haga olvidar lo increíble que eres. 💖",
                "Descansa un momento, tu bienestar es lo más importante. 🌿",
                "Un respiro profundo puede hacer maravillas. Inhala… Exhala… 🌬️",
                "Recuerda que siempre puedes contar conmigo. 🫂💖",
                "Cada desafío te está haciendo más fuerte, aunque no lo parezca. 🏋️‍♀️",
                "No dejes que la presión te quite la alegría de cada día. 💫",
                "Está bien parar un momento y simplemente respirar. ⏳",
                "Hoy enfócate en lo que puedes controlar y deja ir el resto. 🎈",
                "Incluso cuando sientas que todo se descontrola, aquí estoy yo para ti. 💕",
                "Prioriza lo más importante: tú. ✨💖",
                "Un mal día no significa una mala vida. ☀️💛",
                "Tómate tu tiempo, las prisas no llevan a nada bueno. 🚶‍♀️",
                "A veces, un pequeño descanso hace toda la diferencia. 🌊",
                "Date permiso para desconectar y recargar energías. 🔋",
                "No dejes que el estrés te impida disfrutar las pequeñas cosas. 🌷",
                "Recuerda por qué empezaste, pero también permítete descansar. 🌟",
                "Tu esfuerzo es admirable, pero también lo es tu bienestar. 💖",
                "A veces, lo mejor que puedes hacer es dejarlo ir y seguir adelante. 🕊️",
                "La calma llegará, solo aguanta un poco más. 💛",
                "Si hoy sientes que el mundo pesa, recuerda que no lo cargas sola. 🫂",
                "Estás haciendo lo mejor que puedes, y eso ya es suficiente. 🌸",
                "Eres fuerte, incluso cuando no lo sientas. 💪",
                "Tómate un respiro, la vida no es una carrera. 🌿",
                "Mañana será un nuevo día, lleno de oportunidades. 🌅"
            ],
            cansada: [
                "Cierra los ojos un momento, descansa, yo cuidaré de ti. 💕",
                "A veces lo mejor que puedes hacer es dormir y empezar de nuevo mañana. 🌙",
                "No tienes que hacerlo todo hoy, tómate tu tiempo. ⏳",
                "Descansa, mi amor. Nada es más importante que tu bienestar. 🌸",
                "Dormir es como reiniciar el alma. Date permiso de hacerlo. 🔄💖",
                "Si el día fue agotador, permítete un momento de tranquilidad. 🌿",
                "Apoya la cabeza, cierra los ojos y deja que el cansancio se disuelva. 💤",
                "Te mando un abrazo lleno de calma y paz. 🤗💛",
                "La fatiga no define lo increíble que eres. 💫",
                "Un día a la vez, mi amor. No hay prisa, descansa. 💕",
                "Recuerda que hasta las estrellas necesitan descansar. 🌟",
                "Tu cuerpo y mente te están pidiendo un respiro. Escúchalos. 🦋",
                "El descanso también es productividad. 🛌✨",
                "Tómate un momento para ti, lo mereces. 🎀",
                "No importa lo que pase, todo puede esperar. Tu bienestar primero. 💛",
                "No te sientas culpable por descansar, es necesario. 🌿",
                "Un café, una siesta o una pausa pueden hacer maravillas. ☕💖",
                "Relájate, respira y deja que la calma entre en ti. 🌊",
                "Cuando despiertes, verás las cosas con más claridad. 🌅",
                "Hoy te ganaste el derecho de descansar sin remordimientos. 💕",
                "A veces, descansar es la mejor forma de seguir adelante. 🚶‍♀️💛",
                "Cierra los ojos, piensa en algo lindo y deja que el sueño te abrace. 💖",
                "No hay prisa, todo庞大的 aquí cuando despiertes. 🌸",
                "Mañana será un nuevo día, lleno de oportunidades. 🌟",
                "Cuando estés lista, sigue adelante. Por ahora, descansa. 💤",
                "Deja que el cansancio se disuelva y la tranquilidad tome su lugar. 💕",
                "Un buen descanso puede cambiar todo. 🌙💖",
                "Nadie puede ser fuerte todo el tiempo. Permítete un respiro. 💛",
                "Me gustaría estar ahí para abrazarte hasta que duermas. 🤗",
                "No tienes que cargar el mundo, solo descansar y ser tú. ✨"
            ],
            extrañandote: [
                "Tú dices que me extrañas... Pero yo te extraño más. Y lo sabes. 🥺❤️",
                "La distancia solo hace que te quiera más. 💫",
                "Ojalá pudiera abrazarte ahora mismo. 💖",
                "Cierro los ojos y te imagino aquí conmigo. 🌙",
                "Cada día sin ti es un día menos para verte otra vez. ⏳💛",
                "Si pudiera teletransportarme, ya estaría contigo. 🚀💕",
                "Contando los días, las horas y los minutos para verte. 🕰️💖",
                "Te extraño tanto que hasta el aire parece más pesado sin ti. 💕",
                "Mi corazón late diferente cuando no estás cerca. 💘",
                "Extrañarte es la parte más difícil de mi día. 😔",
                "A veces, desearía que el tiempo corriera más rápido. ⏳💛",
                "Si el amor pudiera acortar distancias, ya estaríamos juntos. 🥰",
                "No importa dónde estés, mi corazón siempre te sigue. 💖",
                "Cada día sin ti es un pequeño desafío que supero con amor. 💕",
                "Ojalá pudieras ver cuánto te echo de menos. 💫",
                "Pensar en ti es mi forma de sentirte cerca. 💛",
                "No importa la distancia, siempre estamos conectados. 🌍✨",
                "Aunque no estemos juntos, sé que piensas en mí como yo en ti. 🥰",
                "Es difícil no verte, pero lo que siento por ti lo hace más llevadero. 💖",
                "A veces, extraño hasta el sonido de tu voz. 📞💕",
                "Si el tiempo pudiera ir más rápido cuando no estás… ⏳💛",
                "Dicen que la ausencia hace crecer el amor, y yo lo siento cada día. ❤️",
                "No importa cuánto tiempo pase, siempre te extrañaré igual. 💕",
                "Te pienso tanto que casi parece que estás aquí. 💖",
                "No hay un solo día en el que no desee verte. 🥰",
                "Quisiera que el universo conspirara para juntarnos ahora mismo. 🌟",
                "La espera es dura, pero valdrá la pena cuando te vea otra vez. 💫",
                "Si pudiera pedir un deseo, sería estar contigo ahora. 💕",
                "A veces, solo quiero cerrar los ojos y que, al abrirlos, estés aquí. 😔",
                "Mientras te extraño, me consuela saber que tú también piensas en mí. 💖"
            ],
            pensandoEnTi: [
                "Ahora mismo estaba pensando en ti… Aunque en realidad, siempre lo hago. 🥰",
                "Eres mi pensamiento favorito del día. 💭❤️",
                "Si supieras cuántas veces pienso en ti al día, te asustarías. 😆💓",
                "Pensarte se ha vuelto mi pasatiempo favorito. 💕",
                "Cada pensamiento bonito que tengo, de alguna forma, termina en ti. 🌸",
                "A veces, sin darme cuenta, sonrío porque te estoy recordando. 😊❤️",
                "¿Sabes lo bonito que es despertar y que mi primer pensamiento seas tú? 💛",
                "Si me pagaran por cada vez que pienso en ti, ya sería millonario. 💰💕",
                "Estás en mis pensamientos como una melodía que no quiero dejar de escuchar. 🎶",
                "A veces, te imagino aquí conmigo, y mi día se siente más bonito. 🌷",
                "Me encanta perderme en mis pensamientos cuando el tema eres tú. 💖",
                "Aunque esté ocupado, siempre hay un rinconcito en mi mente reservado para ti. 🧠💘",
                "¿Cómo logras habitar mis pensamientos las 24 horas del día? 🤔💛",
                "Si el pensamiento pudiera teletransportarme, ya estaría contigo. 🚀💖",
                "Hay momentos en los que el mundo se queda en pausa… Porque me pierdo pensando en ti. ⏳💕",
                "Si pudiera dibujar mi mente, estaría llena de recuerdos contigo. 🖌️💖",
                "Te pienso tanto que hasta en mis sueños te apareces. 🌙💫",
                "¿Sabes lo que más me gusta de pensar en ti? Que me hace sentir cerca de ti. 💕",
                "A veces, ni siquiera me doy cuenta de cuánto te pienso… Hasta que alguien me lo señala. 😊💖",
                "Si cada pensamiento sobre ti fuera una estrella, el cielo de mi mente estaría iluminado siempre. ✨🌙",
                "No hay un solo día en el que no aparezcas en mi mente al menos una vez. 💛",
                "Si el amor se midiera en pensamientos, creo que el mío por ti es infinito. ♾️💖",
                "Te pienso tanto que siento que el universo ya debería habernos juntado. 🌍💕",
                "No sé si eres un pensamiento en mi mente o un latido en mi corazón… Quizá ambos. 💓💭",
                "¿Qué haré el día que te tenga a mi lado y ya no tenga que imaginarte? 🥺💖",
                "Cuando el mundo se pone ruidoso, pensar en ti es mi refugio. 💕",
                "Me gusta cuando pienso en ti y, de repente, me llega un mensaje tuyo. ¿Conexión? 😏💘",
                "Cada vez que el día se siente difícil, pensar en ti me da fuerzas. 💪💖",
                "En mi lista de pensamientos importantes, tú siempre ocupas el primer lugar. 🥇💖",
                "A veces, solo quiero decirte: 'Estoy pensando en ti'. 💭❤️"
            ],
            conGanasDeVerte: [
                "Ojalá pudiera verte ahora mismo. ¿Sabes cuánto daría por eso? Muchísimo. 💖",
                "Contando los días para verte de nuevo… Porque cada segundo sin ti es un siglo. ⏳❤️",
                "Si pudiera teletransportarme, ya estaría contigo. 💫",
                "Extraño mirarte a los ojos y perderme en ellos. 👀💕",
                "El día en que te vea otra vez, no te voy a soltar ni un segundo. 🥰",
                "Quisiera que el universo conspirara para juntarnos ahora mismo. 🌟",
                "A veces, todo lo que necesito es verte y abrazarte fuerte. 🤗💖",
                "Si tuviera un deseo, sería poder verte hoy mismo. ✨",
                "No importa cuánto tiempo pase, siempre tendré ganas de verte. 💛",
                "Contando los segundos para nuestro próximo encuentro. ⏳💕",
                "Verte es como un regalo que siempre espero con ansias. 🎁💖",
                "No hay nada que quiera más ahora mismo que verte y decirte cuánto te quiero. 💘",
                "Mi día no está completo sin verte, aunque sea un ratito. ☀️💕",
                "Ojalá pudiera robarte un momento y verte aunque sea de lejos. 👀💖",
                "Si pudiera detener el tiempo cuando estemos juntos, lo haría sin dudarlo. ⏳💛",
                "Hay muchas cosas que quiero hacer… Pero todas empiezan con verte. 💕",
                "La distancia es cruel cuando lo único que quiero es verte sonreír. 😊💖",
                "¿Sabes ese vacío en el pecho? Es porque me faltas tú. 🥺💕",
                "Cuando por fin te vea, no querré despedirme. Nunca. 💛",
                "Ya no sé qué hacer con tantas ganas de verte… 💕",
                "Si verte fuera un medicamento, lo necesitaría todos los días. 💊💖",
                "El mejor momento del día será cuando por fin estemos frente a frente. 🥰",
                "No hay nada que me emocione más que la idea de verte de nuevo. 🌟💘",
                "Quisiera que el destino nos diera una sorpresa y nos hiciera coincidir hoy. 😍💕",
                "Cada día sin verte es un día menos para el reencuentro. ⏳💖",
                "¿Y si nos encontramos sin planearlo? Sería el mejor accidente del mundo. 😏💕",
                "No importa cuánto tiempo pase, mis ganas de verte solo crecen. 💛",
                "Te imagino aquí conmigo y sonrío solo de pensarlo. 😊💖",
                "Dicen que la espera vale la pena… Pero yo ya no quiero esperar. 🥺💕",
                "El día en que te vea otra vez, te recordaré cuánto te extrañé. ❤️"
            ],
            conGanasDePensar: [
                "¿Otra vez con ganas de 'pensar'? 😏 Bueno… Yo también. ❤️‍🔥",
                "Pensar contigo siempre es una buena idea. 😉",
                "Si te digo lo que estoy pensando ahora… 😳",
                "A veces siento que tu 'pensar' tiene doble sentido. 😏",
                "Cuando dices eso, solo me da más curiosidad… 😆",
                "Me gusta cuando dices que tienes ganas de 'pensar'… ¿De qué tipo de pensamiento hablamos? 😏",
                "Hay pensamientos que deberían guardarse… Pero otros deberían compartirse. 🤭",
                "Entre pensar y hacer… Solo hay un paso. 😏",
                "¿Seguro que quieres decirme lo que estás pensando? 😳",
                "No sé si estás pensando lo mismo que yo… Pero espero que sí. 😏",
                "Tu forma de pensar me encanta. 💖",
                "Si lo que piensas es lo que imagino… Entonces sí. 😏",
                "A veces, 'pensar' es solo una excusa. 😉",
                "Me encanta cuando te pones en modo pensativa. 😍",
                "Pensar contigo es peligroso… Pero me encanta. 😏",
                "Hay pensamientos que no deberían decirse… Pero contigo quiero compartirlos todos. 😉",
                "¿De verdad estás pensando eso? Porque yo también. 😆",
                "Me pregunto si tu 'pensar' se parece al mío… 😏",
                "Si estás pensando lo que creo… 👀",
                "¿Segura que solo quieres 'pensar'? 😏"
            ]
        };

        const poemas = [
            "ENTRE NÚMEROS Y LETRAS\n\nEntre números y letras\nsurgió una rosa en una libreta.\nEntre ecuaciones y canciones\nsurgieron nuestros amores.",
            "TOMA MI MANO\n\nToma mi mano,\ny acompáñame al camino\nde la vida.\n\nToma mi mano,\ny recorramos la senda,\nde por vida.",
            "ES IMPOSIBLE OCULTARTE\n\nEs imposible ocultar que estoy enamorado\n¿Cómo esconder lo tanto que te amo?\nPuedo intentar moderarme con todas mis ganas\nPero resulta que tu encanto siempre me gana.",
            "TU LLEGADA\n\nComo un destello de luz\nfue tu llegada a mi vida.\nEl amor a mi lado,\ny yo no enterado.\n\nTu esplendor trastornó\ntodo mi interior,\ny enamorarte\nfue mi gran pasión.\n\nTu sonrisa en mis ojos\nme estremeció,\ny mi reflejo en tus ojos\nme venció.\n\nNo sé cuándo ni cómo\nme enamoré,\npero la gran lección\npude aprender.",
            "No hace falta ir lejos\npara hallar el amor.\nTu llegada a mi vida\nme lo demostró.\n\nPuede ser instantáneo,\no en un momento surgir;\npero cuando se siembra,\nva a persistir.",
            "HÁBLAME\n\nHáblame por favor.\nNo dejes el silencio\nconsumir mi interior.\n\nNo dejes este fuego,\ny su ardor,\nperder la pasión.",
            "CUANDO TE VEO\n\nCuando te veo,\nno sé quién soy.\nCuando te veo,\nfluye el amor.\nCuando te veo,\n¡qué pasión!\n\nCuando te veo,\nsalta el corazón.",
            "NO SÉ CÓMO\n\nNo sé cuándo ni cómo\nse encendió una chispa en mí.\nNo sé cuándo ni cómo\nme enamoré de ti.\n\nDicen que el amor ciego es,\ny por eso Cupido no ve,\npero yo ahora puedo verlo\nen tu sonrisa sin placer.",
            "TE QUIERO\n\nNo sabes tú\ncuánto anhelo\ndecirte te quiero.\nMirarte a los ojos,\ny con corazón sincero,\nexpresarte mi deseo.",
            "AMOR... ¿CORRESPONDIDO?\n\nEstoy enamorado,\ny no sé por qué.\nQuizás no es mi deseo,\nno lo puedo entender.\nPero tu rostro es lo que veo,\ny no te veo en él.\nAhí no está la imagen\nque de ti representé.\n\nQué momento de placer,\ncuando te veo aparecer.\nTodo se detiene,\npero no parece fiel.\nNo dejo de mirarte,\ny con disimulo proceder,\ninhibiendo lo que siento,\ny con miedo de perder.",
            "Con miedo de perderte a ti,\nde perder tu neonatal,\nde que no seas para mí,\nde no importante a ti.\n\nCorresponde hoy a mi amor,\ncorresponde a esta pasión,\ncorresponde hoy al deseo\nque hay en mi corazón.\n\nConcédeme tu sonrisa,\ny el instante que no corra yo por ti,\ncoro tú por mí.",
            "NO DEJO DE PENSAR EN TI\n\nNo dejo de pensar en ti,\ny hasta me estoy preocupando.\n¿Será solo una obsesión?\n¿O en realidad es amor?\n\nTú me has hecho ver estrellas,\ny transformado mi pensar.\n\nAhora no lo entienden ni ellas...\n¿Por ti loco debo estar?",
            "¿ME QUIERES?\n\nTe quiero,\npero parece que no me quieres.\nMas vuelvo a quererte,\ny de repente creo que me quieres.\n¿Será una simple cosa ilusoria,\no es una verdad notoria?\n\n¿En verdad me quieres,\no solo mi esperanza mantienes?\n¡Cómo quisiera saber\ntu corazón, conocerlo.\n\n¿En verdad me quieres?\n¿O solo me retienes?\nNo comprendo tu reacción,\ny a veces me trastorno,\npero hay un rayo de luz,\nque despierta mi canción.\n\nPara tu corazón es un adorno\nque del mío proviene:\nalmas gemelas conectadas,\ny por la eternidad enlazadas.",
            "DESTINO\n\nVoy soplado del destino\ndonde este quiera guiarme.\nY si me lleva contigo,\ncon gusto he de aceptarle.",
            "QUÉ DIFÍCIL ES DEJAR DE PENSAR EN TI\n\nQué difícil es dejar de pensar en ti;\nqué difícil es abandonar ese momento.\n¡Dan ganas de poder detener el tiempo!, para transitar.\nPero el fluir nunca se detiene,\nAvanza rápido y sin perdón.\nOh, segundos de mi corazón,\n¡multiplicaos por causa del amor!",
            "TE VEO Y NO TE VEO\n\nTe veo y no te veo.\nY cuando te veo,\nno sé por qué te veo.\nY si te dejo de ver,\nparece que voy a perecer,\nluego te quiero volver a ver.",
            "TE VEO DIFERENTE\n\nTe veo diferente,\ny no sé qué es lo que sientes.\nPero me imagino tu mente\ny creo que no mientes.\nParezco correspondido,\ny amado con motivo\npor la mejor rosa entre los vivos.\n¡La más bonita que he conocido!",
            "DESEO CUMPLIDO\n\nHoy se cumplió ese deseo,\ny te dije que te quiero.\nHoy vivimos el momento\nen que expresamos los sentimientos.\nHoy pude acercarme a ti\npara mi corazón traducir.\nY fue una nueva muy feliz\nsaber que pensabas igual de mí.",
            "SINCERIDAD\n\nSinceridad, es lo que todos queremos.\n¿Quieres que sea sincero?\n\nAnhelo que te recuestes de mi pecho.\nAnhelo hilar mi mano entre tus dedos.\nAnhelo acariciar tu dulce pelo.\nLo que eres, anhelo conocerlo.",
            "QUÉ IMPACTO\n\nQué impacto tuvo mi ser\ncuando tu entrada pude ver.\nTanta hermosura de repente\nque no sabía responder mi mente.\n\nQué hermosa estás siempre,\ny hoy me sorprendiste nuevamente.\nTu belleza me cautiva,\nen un segundo cambias mi ambiente.\n\nCuando te saludé... ¿Cómo he de hacerte frente?\nDe mi enamoramiento eso es una prueba patente.\nEres grandiosa, y cada día es algo creciente.\nPreciosa, ¡cómo me encantas! Eso es evidente.",
            "EN EL AMOR NADIE MANDA\n\nEn el amor nadie manda.\nY cuando menos te lo esperas,\na tu puerta llama.\nMuy sutilmente comienza.\nY aunque abrirle no quieras.",
            "ASÍ ES LA VIDA\n\nAsí es la vida.\nA veces es buena,\na veces compleja.\nAsí es la vida.\nA veces es bella,\na veces novela.\nAsí es la vida.\nDe repente tierna,\ny en un momento te atropella.\nAsí es la vida.\nPero desde que estás tú,\nno hago más que ver estrellas.",
            "EL INFINITO EN TUS OJOS\n\nEstaba anocheciendo\ncuando de repente pensé:\n«Hoy no he dejado mi poema,\n¡ni un segundo más tardaré!».\nCon pasión me apresuré,\ny la pluma fuerte agarré.\nNo sabía qué iba a hacer,\ny en la luna terminé.\n\nY contemplé desde las alturas\nla hermosura de la tierra,\ny a un segundo luz de distancia\nuna luz resplandeciente y bella.\n\nEn la oscuridad estaba ella,\nalumbrando como todo un sol.\nY con su enorme destello\ntraspasaba mi corazón.",
            "Para analizar su enorme esplendor\ntuve que sacar mi telescopio.\nY acercándome al máximo\nahora deseaba un microscopio.\nSu estilo único y propio\npudo despertar mis escritos.\nY desde aquel observatorio,\ndisfruté en sus ojos el infinito.",
            "CUANDO ESTOY CONTIGO\n\nCuando estoy contigo,\nse desvanece el tiempo.\nCuando estoy contigo,\ndisfruto cada momento.\nCuando estoy contigo,\namor es lo que siento.\nCuando estoy contigo,\ntodo es una eternidad.\nCuando estoy contigo,\nparece que la vida se detendrá.\nPero cuando estoy contigo,\nesa eternidad velozmente se va.",
            "DICEN QUE EL AMOR...\n\nDicen que el amor te hace ver estrellas,\npero yo solo veo una.\nDicen que sientes muchas maripositas,\npero yo solo siento una.\nDicen que quieres muchas sonrisas,\npero yo solo quiero una.\nDicen que entonces se regalan rosas,\npero yo solo anhelo una:\nA mi estrella, mi mariposita, mi sonrisa.",
            "¿ES ETERNO?\n\n¿Es eterno\neste fuego de amor que siento?\n¿Es eterno\neste río de pasión que tengo?\n¿Es eterna\nesta llama que arde en mi corazón?\n¿Es eterna\nnuestra conexión de amor?",
            "LATIDO DEL CORAZÓN\n\nUnas lágrimas rodean mi rostro,\nrecorren la faz sin piedad.\nHay una distancia entre nosotros,\n¿pero cuál será nuestro parar?\n\nEsa figura llega a mi interior,\nintensifica el latir del corazón.\nComo si fuera un sencillo cantor,\nque con su rima transmite amor.\n\n¿Pero qué es eso tan deseado,\nque todos tiemblan si lo oyen?\nNo es solo querer y arrancar,\nes proteger y saber cuidar.",
            "QUEBRANTO\n\nNo sabes cómo me siento,\ny yo no sé cómo te sientes.\n¿Estos son esos momentos\nen los que desearías parar el tiempo?\n¿O simplemente son suspiros\nque te gustaría no hubieran ocurrido?\n\nEn medio de la alegría inmensa\nse forma una profunda tristeza.\n¿Acaso al final de esta senda\nencontrarás cerrada la puerta?\n¿O esa pequeña lágrima de dolor\nestá condenada a sufrir prisión?\n\nNo sé el objeto de este quebranto,\npero en vano no será el llanto.\n¿Miras al cielo y ves azul eterno?\n¿O miras al sol y ves amarillo alegre?\n¿O acaso las nubes de la densa lluvia\nhan cubierto tu paisaje de penuria?",
            "CARPE DIEM\n\nHay tantas cosas que el corazón desea decir.\nHay tantas cosas que el corazón desea hacer.\nHay tantas cosas que anhelamos conseguir.\nHay tantas cosas que anhelamos tener,\nque muchas veces nos olvidamos del carpe diem.",
            "VIAJE\n\nHoy te fuiste de viaje,\nmi sol.\nCon una maleta de flores,\ny un girasol.\n¿Qué pasará? Pensaba mi alma,\n¡qué dolor!\nTodavía no se ha ido,\ny ya extraño su calor.\nPero ve, disfruta y aprende\ncon amor,\nque seguiremos uniendo\nnuestro corazón.",
            "TE EXTRAÑO\n\nNo estamos a la distancia\nde la tierra a la luna,\npero este muchachito\nextraña tu ternura.\n«¿Qué será de mis ricitos?»\nme pregunto sin parar,\ny nunca dejo de soñar,\nni en tu belleza pensar.",
            "EN MEDIO DEL SILENCIO\n\nAun en medio del silencio\nse escucha una hermosa voz.\nA paradoja parece esto,\npero es más que una pasión.\n\nAun en medio del silencio\nnoto tu mano en mis labios.\nEstás frenando el desenfreno...\n«Shhhh, solo calla de Amor».",
            "HOY ME ADELANTO YO\n\n¿Y si hoy me adelanto yo?\n¿Y si hoy me tomo el atrevimiento,\nde otra vez mis pensamientos,\ndejarlos inscritos en tu corazón?\n\nLo haré, y será como una canción.\n\nYa casi mi lenguaje son los versos,\nquiero que su luz siempre brille.\nY créeme no serte molesto,\nsino escuchar de ti un «¿¡Qué dices!?»\n\n¿Y si me tomo la valentía\nde mirar por mi ventana\nel análisis de muchas estrellas,\nque resplandecen en la nada?\nLo haré, sé que eres una de ellas.\n\nSiempre quieres ser la primera\ncon esa sonrisa tan sincera.\n¿Pero si hoy yo soy el primero,\nen decirte que te quiero?",
            "Ganaremos los dos, lo sé,\ny ninguno perderá, también lo sé.\nPor lo que seguiremos ganando tú y yo.\nAsí que, triste no estés: te quiero con fervor.",
            "¿CÓMO PIENSO EN TI!\n\nPienso en mí,\ny pienso en ti.\nPienso en mi mente\ny pienso en ti.\nPienso en mi corazón,\ny pienso en ti.\nPienso en mi tiempo,\ny pienso en ti.\nPienso en todo,\ny, claro está, pienso en ti.",
            "TUS DULCES MANOS\n\nTus dulces manos,\ndeleitosas como las teclas de un piano\ncuando conoces sus secretos\ny no las tocas en vano.\nAgradables como la melodía\nde una grata sinfonía\ny codiciables como los manjares\nen las grandes compañías.\nTus dulces manos,\ncautivadoras más que el mar,\ntan relajantes que mi corazón\nhacen derramar.",
            "NARCISO\n\nEl narciso es una flor hermosa,\npero no tanto como mi rosa.\nNarciso se cree el más bello aquí,\nal menos quiere creerlo así.\n¿Acaso sabe que te conocí?\nPorque él no se compara a ti.",
            "JUGUEMOS AL INFINITO\n\n¿Quieres jugar al infinito...?\n¿En serio deseas hacerlo?\nAdmiro mucho tu solicitud,\nmas querida, el infinito eres tú.",
            "INEXORABLE\n\nInexorable,\nes este amor que siento por ti.\nInevitable,\npalpitar veloz y olvidar el existir.\nIndescriptible,\nla flecha que atravesó mi corazón.\nIrresistible,\nver tu rostro y Malcolm el amor.",
            "CUENTA LOS DÍAS\n\nCuenta los días, hazlo.\nCuenta el paso del reloj.\nVerás en ellos los escritos\nque de mi corazón son los gritos.\nUno en cada paso,\ny poca sería la cifra,\npara anunciar al mundo entero\ncómo mi ser por ti suspira.",
            "¿POR QUÉ SUFRO?\n\nSi te quiero, ¿por qué sufro?\nSi me quieres, ¿por qué duele?\n«¿Acaso el amor y el dolor son dos cosas gemelas?»\nTontería no es,\nporque he vivido los dos contigo.\n\nQuizá es ese deseo de no herir\ntu dulce corazón\ncon promesas hoy encendidas\ny mañana de cenizas revestidas.\nQuizá es la duda de mi mente\ndiciéndose\n«¿acaso es la elección correcta?»\nQuizá es el temor de mi ser\na lo que dirán al ver\na dos jovencitos apasionados,\nsin entender lo que viven,\nsimplemente enamorados.\n\nPor qué sufro,\nsi has flechado mi corazón.\nPor qué duele,\nquizá sea la herida de tu flecha.\nAmada, es cierto que duele y quebranta...\nAún así: aquí hay un corazón que te ama.",
            "TAUTOLOGÍA\n\nTautología,\npalabras antes para mí desconocida.\nTautología,\nser circular y redundancia sin medida.\nTautología,\n¿sabes qué es esa palabra en mi vida?\nTautología es decir siempre que te quiero,\naunque ya haya dicho lo mucho que te quería.",
            "BRECHA\n\nTe escribo desde el otro lado,\natravesando el abismo del olvido.\nDesde donde el amor aflora,\ny las emociones no tienen morada.\n\nTe escribo desde el precipicio,\nal límite de todo lo prohibido.\nNo atendiendo la profundidad,\ny mostrando la debilidad.\n\n¿Así tiene que ser la autoridad?\n¡Si esto lo sufre toda la humanidad!\nSolo busco un poco de intimidad,\nMcCarthy de por de.\nEs intensa la velocidad,\npero en mi corazón no hay maldad.",
            "Te escribo desde ese mismo lugar\ndonde los sueños se vuelven realidad.\nDesde donde salen las palabras\nlimitadas por las etapas.\nTe escribo desde dentro,\ny con la mirada en lo alto.\nTe saludan mis ojos,\nque solo esbozan tu belleza.\n\nYo veo tus ojitos... Sí,\nlos que describen el infinito.\nTe escribo desde mi corazón,\ny directo a tu interior.\n¿Cómo fingir, cómo inhibir,\n¡cómo mentir!?\n¿Cómo esconder lo que siento por ti?\n\nMultitud de pensamientos\nno lo han podido conseguir.\nLo siento, pero la vida es así.",
            "¿Cómo dejar de decir\nlo que tú despertaste en mí?\n\nTe escribo... Te hablo aun sin voz.\nSi alguien no lo entiende...\nLo siento, el amor me tocó.",
            "ROSAS VACÍAS\n\nMultitud de rosas\nen un jardín encantado.\nMultitud de flores\npara un jardín desesperado.\n¿Acaso todas huelen igual?\n¿Acaso todas son así de hermosas?\n\nPienso, y ninguna será igual.\nMedito, y ninguna tendrá la misma fragancia.\nMi rosa sí tiene encanto,\ny benditos son sus pétalos.\nSus espinas incluso confortan;\nmi rosa, ninguna con su valor.",
            "MIRAR TUS OJOS\n\nMirarte a los ojos\ny transmitir amor.\nMirarte a los ojos\ny ver tu corazón.\nMirarte a los ojos\ny escuchar tu clamor.\nMirarte a los ojos,\nmucho más que pasión.\nMirarte a los ojos\ny quererte siempre.\n¿Quién lo entiende?\nSolo tú y yo.",
            "MI CIELO\n\nTú eres el cielo de mi vida.\nAl verte, todas las estrellas giran.\nTu imagen, siempre alumbra mis días.\nTu voz, la más dulce y tierna melodía.\nTú, tú eres mi mejor compañía.\nSí, tú eres el cielo de mi vida.",
            "NO SABÍA QUE DOLÍA TANTO\n\nNo sabía que dolía tanto.\nNo imaginaba este quebranto.\nVer traspasado mi corazón\npor la supuesta alegría del amor.\nEstar rodeado y a la vez solo,\nmientras tiene lugar el desarrollo.\n\nSuelen decir que el amor trae paz,\npero eso no ha resultado eficaz.\n\nOh, quisiera decir que mientras escribo\ngozo es lo único que cultivo.\nPero más honda la herida percibo,\n¿cómo llegó hasta aquí? ¿Cuál fue su camino?\nOh, si los demás pudieran entender\nque siento más que un simple querer.\nAl menos una figura traducir,\nque mi corazón no piensa en maldecir.",
            "Oh, si escucharan de mi interior el canto...\nOtra vez lo digo, solo estoy enamorado.",
            "PIENSO EN TI\n\nPienso en ti donde esté.\nY cuando no estoy, pienso en ti.\nEres el recuerdo de mi amor,\ny también el de mi dolor.\n\nPero pienso en ti, y disfruto.\nY cuando no, pienso en ti.\nEsta es mi vida por ahora, así:\nSolo me queda pensar en ti.",
            "NO ROMPAS EL CORAZÓN\n\nDicen que dos corazones unidos...\nPor cierto, ¿qué es el amor entre nosotros?\nDifícilmente son separados.\n¿Sabes que te quiero?\nNo importa que estén entristecidos,\n¿Te gusta mirar las estrellas en la soledad?\nPorque su vínculo ya ha sido establecido.\n¿Disfrutas el resplandor de la luna atravesar tu ventana?\nNo rompas nuestras canciones.\n¿Sabes que nuestro corazón atraviesa?",
            "¿SIGUES TENIENDO ALAS?\n\n¿Sigues sintiéndolo?\n¿Sigues estando radiante?\n¿Tu corazón sigue teniendo alas?\n¿Sigues teniendo las ansias?\n¿Sigues viendo el milagro de tus sueños?\n¿Todavía existe el calor?\n¿Permanecen tus melodías?\n¿Todavía sigue nuestra sinfonía?\n¿O se supone que no debía haber ninguna?\n¿O nosotros, inmaduros,\nvivimos nuestro sueño de luna?\n¿Todavía puede componer el cantor?\n¿Sigue brillando eso que llamamos «amor»?",
            "ENTENDÍ LO DIFÍCIL\n\nAl principio parecía hermoso;\nluego se miraba escandaloso.\nDespués seguía lo glorioso,\nsegún los ritos religiosos.\n\nMas en la experiencia, silencioso,\nel transcurso vivía, nervioso.\n\nQuería mostrarme respetuoso,\nempero terminaba contencioso.\nComo todo un cuidadoso,\nquería vencer lo doloroso.\n\nMas entendí que el comienzo amoroso,\ntambién puede ser desamoroso.",
            "ESOS JUEGUITOS\n\n¿Dónde están esos jueguitos\nque jugábamos toditos?\n¿Dónde están esos momentos\nen que ignorábamos el tiempo?\n¿Dónde están esos días\nque nos hacían gozar y tanto?\n\nParece que se perdieron en el rincón del tiempo.\nEse tiempo que una mirada nos hizo querernos.\nPero no creo que estén perdidos,\nsimplemente están escondidos.\nEsperan a alguien que los encuentre,\ny los saque a brillar nuevamente.",
            "UN ABRAZO\n\nCómo extraño ese instante\nen el que el tiempo se detiene.\nDonde se juntan nuestras visiones\ny saltan los corazones.\nDonde la ilusión del contacto\nse convierte en realidad.\n¿Dónde están esos momentos\nen los que oímos el «te quiero»?",
            "RECUERDO VACÍO\n\nUn destello deslumbrante\na la distancia se asoma.\nUn recuerdo en el vacío\ncomo un reflejo levitante.\n\nFlores, perlas y mariposas\nadornan una casa Barbosa.\n«Venid, entrad y aspirad;\nllenad este círculo tan vacío»\n¿Esto tiene significado?\n\nPuede ser un lugar reservado.\nUn vacío en un alma sedienta\nesperando ser saciado.\n\nFlores, perlas y mariposas\nadornan una casa arteriosa.\nLos destellos, como luces cariñosas,\nla hacen cada vez más hermosa.",
            "INTRUSIÓN\n\nMente viva en un momento desviada.\nPierde su pensamiento sin entender nada.\nSolo es fruto de la intrusión, camarada;\nesa figura en tu mente, apasionada.\n\nParece que en ti se ha quedado abandonada,\ncomo si nada más existiera, ahí condenada.\n\nPara tus sentimientos se vuelve una espada,\nmientras buscas el fin de esa jornada.\nEntonces tu alma se pregunta ansiosa:\n«¿Cómo caí en esta trampa envenenada?»\nLa doncella que te extendía la llamada\nresultó ser simplemente la camada.\n\nMas cuando quieres abandonar esa parada,\nno te resistes ante una nueva mirada.\nLa llama vuelve a la intensidad adecuada,\ny se prepara a esperar: «¿cuándo será la bajada?»",
            "LA LUNA COMO NUNCA\n\nHe visto la luna como nunca antes.\nTan brillante y cálida como el sol.\nHe visto cómo deslumbra su reflejo,\ncapaz de despertar el corazón.\nHe visto cómo con su mirada\nllora y expresa mucho dolor,\nal traer a memoria aquellos días\nen que yo admiraba su expresión.\n\n¡Qué inocencia la de mi luna!\nNo conoce mi intención.\nNo me he olvidado de ella,\naún le compongo mi canción."
        ];
        while (poemas.length < 365) {
            poemas.push(poemas[Math.floor(Math.random() * poemas.length)]);
        }

        function obtenerDiaDelAño() {
            const ahora = new Date();
            const inicioAño = new Date(ahora.getFullYear(), 0, 1);
            const diferencia = ahora - inicioAño;
            return Math.floor(diferencia / (1000 * 60 * 60 * 24));
        }

        function obtenerPoemaDiario() {
            const hoy = new Date().toISOString().split("T")[0];
            const clave = `poema-${hoy}`;
            let poemaGuardado = localStorage.getItem(clave);
            if (!poemaGuardado) {
                const diaDelAño = obtenerDiaDelAño();
                poemaGuardado = poemas[diaDelAño];
                localStorage.setItem(clave, poemaGuardado);
            }
            return poemaGuardado;
        }

        function mostrarPoema() {
            const poema = obtenerPoemaDiario();
            document.getElementById("poema").innerText = poema;
        }

        function obtenerFraseDiaria(emocion) {
            const hoy = new Date().toISOString().split("T")[0];
            const clave = `frase-${emocion}-${hoy}`;
            let fraseGuardada = localStorage.getItem(clave);
            if (!fraseGuardada) {
                const frasesDisponibles = frases[emocion];
                fraseGuardada = frasesDisponibles[Math.floor(Math.random() * frasesDisponibles.length)];
                localStorage.setItem(clave, fraseGuardada);
            }
            return fraseGuardada;
        }

        function mostrarMensaje() {
            const emocion = document.getElementById("emocion").value;
            const mensaje = obtenerFraseDiaria(emocion);
            document.getElementById("mensaje").innerText = mensaje;
            incrementarContadorEmocion(emocion);
        }

        document.getElementById("password").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                document.getElementById("login").click();
            }
        });
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getDatabase, ref, push, onChildAdded, get, set, onValue, serverTimestamp, onDisconnect } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAcweOs5qS3v4xbzmkYCFLKxVaSWVsly_M",
            authDomain: "estrellita-chl.firebaseapp.com",
            databaseURL: "https://estrellita-chl-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "estrellita-chl",
            storageBucket: "estrellita-chl.firebasestorage.app",
            messagingSenderId: "1006618062076",
            appId: "1:1006618062076:web:8cc3a6bb3ebe800d11fb79",
            measurementId: "G-X2K8ZCR608"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
        const db = getDatabase(app);

        const USUARIO_ESTRELLITA = "oras5982";
        const USUARIO_ADMIN = "jahaziel.alvarezreyes";

        let inactivityTimer;
        let usuarioActual = "";
        let loginTime = null;

        function cargarEmailJS() {
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js';
            script.onload = function() {
                window.emailjs.init('FK-l7zhLUb3b7Ah2X');
            };
            document.head.appendChild(script);
        }
        cargarEmailJS();

        function enviarNotificacionAcceso(usuario) {
            if (window.emailjs) {
                window.emailjs.send('service_mrtsxqh', 'template_xypee8k', {
                    from_name: usuario,
                    message: "Ha iniciado sesión en la aplicación",
                    date: new Date().toLocaleString()
                }).then(function(response) {
                    console.log('Notificación de acceso enviada:', response.status, response.text);
                }, function(error) {
                    console.error('Error al enviar notificación:', error);
                });
            }
        }

        function inicializarNotificacionesMensajes() {
            onChildAdded(ref(db, "mensajes"), function (snapshot) {
                const data = snapshot.val();
                if (data.usuario === "Estrellita" && usuarioActual !== USUARIO_ADMIN) {
                    enviarCorreo(data.usuario, data.mensaje, data.fecha);
                }
            });
        }

        function inicializarEstadoConexion() {
            const estadoRef = ref(db, "estadoUsuarios/Estrellita");
            if (usuarioActual === USUARIO_ESTRELLITA) {
                set(estadoRef, true);
                onDisconnect(estadoRef).set(false);
                enviarNotificacionAcceso("Estrellita");
            }
            onValue(estadoRef, (snapshot) => {
                const conectado = snapshot.val();
                console.log("Estado de Estrellita:", conectado ? "Conectada" : "Desconectada");
                if (conectado && usuarioActual === USUARIO_ADMIN) {
                    mostrarNotificacionLocal("¡Estrellita ha iniciado sesión!");
                }
            });
        }

        function enviarCorreo(usuario, mensaje, fecha) {
            if (window.emailjs) {
                window.emailjs.send('service_mrtsxqh', 'template_xypee8k', {
                    from_name: usuario,
                    message: mensaje,
                    date: fecha
                }).then(function(response) {
                    console.log('Correo enviado:', response.status, response.text);
                }, function(error) {
                    console.error('Error al enviar correo:', error);
                });
            }
        }

        function mostrarNotificacionLocal(mensaje) {
            if (Notification.permission === "granted") {
                new Notification("Estrellita App", { body: mensaje });
            } else if (Notification.permission !== "denied") {
                Notification.requestPermission().then(permission => {
                    if (permission === "granted") {
                        new Notification("Estrellita App", { body: mensaje });
                    }
                });
            }
        }

        const listaEmociones = [
            { value: "feliz", label: "Feliz 😊" },
            { value: "triste", label: "Triste 😔" },
            { value: "estresada", label: "Estresada 😵‍💫" },
            { value: "cansada", label: "Cansada 🥱" },
            { value: "extrañandote", label: "Extrañándote 🥺" },
            { value: "pensandoEnTi", label: "Pensando en ti 💭❤️" },
            { value: "conGanasDeVerte", label: "Con ganas de verte 🥰" },
            { value: "conGanasDePensar", label: "Con ganas de 'pensar' 😏" }
        ];

        function obtenerNombreUsuario(email) {
            return email.split('@')[0].toLowerCase();
        }

        function obtenerNombreMostrado(email) {
            const usuario = obtenerNombreUsuario(email);
            return usuario === USUARIO_ESTRELLITA ? "Estrellita" : "Luna";
        }

        function registrarAcceso(usuario) {
            if (usuario === USUARIO_ESTRELLITA) {
                const accessLogRef = ref(db, "accesos");
                push(accessLogRef, {
                    usuario: usuario,
                    timestamp: serverTimestamp(),
                    fecha: new Date().toLocaleString(),
                    inicio: new Date().getTime()
                });
                loginTime = new Date().getTime();
            }
        }

        function registrarTiempoSesion(usuario) {
            if (usuario === USUARIO_ESTRELLITA && loginTime !== null) {
                const sessionEndTime = new Date().getTime();
                const sessionDuration = (sessionEndTime - loginTime) / 1000 / 60;
                const sessionLogRef = ref(db, "tiempoSesiones");
                push(sessionLogRef, {
                    usuario: usuario,
                    timestamp: serverTimestamp(),
                    fecha: new Date().toLocaleString(),
                    duracionMinutos: sessionDuration.toFixed(2),
                    inicio: new Date(loginTime).toLocaleString(),
                    fin: new Date().toLocaleString()
                });
                loginTime = null;
            }
        }

        function inicializarContadoresEmociones() {
            const contadoresRef = ref(db, "contadores");
            get(contadoresRef).then((snapshot) => {
                if (!snapshot.exists()) {
                    const contadoresIniciales = {};
                    listaEmociones.forEach(emocion => {
                        contadoresIniciales[emocion.value] = 0;
                    });
                    set(contadoresRef, contadoresIniciales);
                }
            }).catch(error => {
                console.error("Error al inicializar contadores:", error);
            });

            const usuario = obtenerNombreUsuario(auth.currentUser.email);
            usuarioActual = usuario;
            actualizarInfoAdmin(usuario);

            const contadorElement = document.getElementById("contador-emociones");
            const historialElement = document.getElementById("historial-emociones");

            if (usuario === USUARIO_ADMIN) {
                console.log("¡Usuario administrador detectado!", usuario);
                contadorElement.style.display = "block";
                historialElement.style.display = "block";
                onValue(contadoresRef, (snapshot) => {
                    if (snapshot.exists()) {
                        const contadores = snapshot.val();
                        actualizarUIContadores(contadores);
                    }
                });
                inicializarHistorialEmociones();
            } else {
                console.log("Usuario no administrador:", usuario);
                contadorElement.style.display = "none";
                historialElement.style.display = "none";
            }
        }

        function actualizarInfoAdmin(usuario) {
            const adminInfoPanel = document.getElementById("admin-info");
            const usuarioNombre = document.getElementById("usuario-nombre");
            const adminStatus = document.getElementById("admin-status");

            if (usuario === USUARIO_ADMIN) {
                adminInfoPanel.style.display = "block";
                usuarioNombre.textContent = usuario;
                adminStatus.textContent = "Sí";
                adminStatus.style.color = "green";
            } else {
                adminInfoPanel.style.display = "none";
            }
        }

        function actualizarUIContadores(contadores) {
            const contenedor = document.getElementById("contadores-container");
            contenedor.innerHTML = "";
            listaEmociones.forEach(emocion => {
                const contador = contadores[emocion.value] || 0;
                const div = document.createElement("div");
                div.className = "contador-item";
                div.innerHTML = `
                    <span class="contador-label">${emocion.label}:</span>
                    <span class="contador-valor">${contador}</span>
                `;
                contenedor.appendChild(div);
            });
        }

        window.incrementarContadorEmocion = function(emocion) {
            if (usuarioActual === USUARIO_ESTRELLITA) {
                console.log(`Registrando emoción: ${emocion} para ${usuarioActual}`);
                const contadorRef = ref(db, `contadores/${emocion}`);
                get(contadorRef).then((snapshot) => {
                    const valorActual = snapshot.exists() ? snapshot.val() : 0;
                    set(contadorRef, valorActual + 1).then(() => {
                        console.log(`Contador de ${emocion} actualizado a ${valorActual + 1}`);
                    }).catch(error => {
                        console.error("Error al incrementar contador:", error);
                    });
                }).catch(error => {
                    console.error("Error al leer contador:", error);
                });

                const historialEmocionesRef = ref(db, "historialEmociones");
                push(historialEmocionesRef, {
                    emocion: emocion,
                    usuario: usuarioActual,
                    timestamp: serverTimestamp(),
                    fecha: new Date().toLocaleString()
                }).then(() => {
                    console.log(`Emoción ${emocion} registrada en historial`);
                }).catch(error => {
                    console.error("Error al registrar historial:", error);
                });
            }
        };

function inicializarHistorialEmociones() {
            console.log("Inicializando historial de emociones para administrador");
            const historialRef = ref(db, "historialEmociones");
            onValue(historialRef, (snapshot) => {
                console.log("Datos de historial recibidos:", snapshot.val());
                if (snapshot.exists()) {
                    actualizarUIHistorial(snapshot.val());
                }
            });
        }

        function actualizarUIHistorial(historial) {
            const contenedor = document.getElementById("historial-container");
            contenedor.innerHTML = "";
            const historialArray = Object.entries(historial).map(([key, value]) => ({
                id: key,
                ...value
            }));
            historialArray.sort((a, b) => b.timestamp - a.timestamp); // Ordenar por timestamp descendente
            historialArray.forEach(evento => { // Mostrar todas las entradas sin límite
                const nombreEmocion = listaEmociones.find(e => e.value === evento.emocion)?.label || evento.emocion;
                const div = document.createElement("div");
                div.className = "historial-item";
                div.innerHTML = `
                    <span>${nombreEmocion}</span>
                    <span style="float: right; font-style: italic; font-size: 0.9em;">${evento.fecha}</span>
                `;
                contenedor.appendChild(div);
            });
        }

        document.getElementById("togglePassword").addEventListener("click", function () {
            const passwordInput = document.getElementById("password");
            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                this.innerText = "🙈";
            } else {
                passwordInput.type = "password";
                this.innerText = "👁";
            }
        });

        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            inactivityTimer = setTimeout(() => {
                registrarTiempoSesion(usuarioActual);
                signOut(auth).then(() => {
                    document.getElementById("contenido").style.display = "none";
                    document.getElementById("loginContainer").style.display = "block";
                    alert("Sesión cerrada por inactividad");
                });
            }, 5 * 60 * 1000);
        }

        document.getElementById("login").addEventListener("click", function () {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            const loginError = document.getElementById("loginError");

            loginError.textContent = "";

            signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
                document.getElementById("loginContainer").style.display = "none";
                document.getElementById("contenido").style.display = "block";
                resetInactivityTimer();
                usuarioActual = obtenerNombreUsuario(userCredential.user.email);
                console.log("Inicio de sesión exitoso. Usuario:", usuarioActual);
                registrarAcceso(usuarioActual);
                inicializarContadoresEmociones();
            })
            .catch((error) => {
                console.error("Error al iniciar sesión:", error);
                switch(error.code) {
                    case 'auth/invalid-email': loginError.textContent = "El correo electrónico no es válido."; break;
                    case 'auth/user-not-found': loginError.textContent = "No se encontró un usuario con este correo."; break;
                    case 'auth/wrong-password': loginError.textContent = "La contraseña es incorrecta."; break;
                    case 'auth/too-many-requests': loginError.textContent = "Demasiados intentos. Intenta más tarde."; break;
                    default: loginError.textContent = "Error al iniciar sesión: " + error.message;
                }
            });
        });

        document.getElementById("email").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                document.getElementById("password").focus();
            }
        });

        document.getElementById("logout").addEventListener("click", function () {
            registrarTiempoSesion(usuarioActual);
            signOut(auth).then(() => {
                document.getElementById("contenido").style.display = "none";
                document.getElementById("loginContainer").style.display = "block";
                usuarioActual = "";
            }).catch((error) => {
                console.error("Error al cerrar sesión:", error);
                alert("Error al cerrar sesión: " + error.message);
            });
        });

        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById("loginContainer").style.display = "none";
                document.getElementById("contenido").style.display = "block";
                resetInactivityTimer();
                usuarioActual = obtenerNombreUsuario(user.email);
                console.log("Usuario detectado en cambio de estado:", usuarioActual);
                registrarAcceso(usuarioActual);
                inicializarContadoresEmociones();
            } else {
                document.getElementById("loginContainer").style.display = "block";
                document.getElementById("contenido").style.display = "none";
                usuarioActual = "";
                loginTime = null;
            }
        });

        document.addEventListener("mousemove", resetInactivityTimer);
        document.addEventListener("keydown", resetInactivityTimer);

        document.getElementById("mensajeInput").addEventListener("keydown", function(event) {
            // Enter agrega salto de línea
        });

        let mensajesMostrados = new Set();

        function mostrarMensaje(data) {
            if (data.key && mensajesMostrados.has(data.key)) return;

            const chat = document.getElementById("chat");
            const mensajeElemento = document.createElement("div");
            mensajeElemento.classList.add("mensaje-item");

            if (data.key) {
                mensajesMostrados.add(data.key);
                mensajeElemento.setAttribute("data-id", data.key);
            }

            const nombreMostrado = sanitizarTexto(data.usuario || "Usuario");
            const mensajeSanitizado = sanitizarTexto(data.mensaje);
            const mensajeFormateado = mensajeSanitizado.replace(/\n/g, '<br>');
            mensajeElemento.innerHTML = `<p><strong>${nombreMostrado}:</strong> ${mensajeFormateado}</p>`;
            chat.appendChild(mensajeElemento);
            chat.scrollTop = chat.scrollHeight;
        }

        function cargarMensajesIniciales() {
            const mensajesRef = ref(db, "mensajes");
            mensajesMostrados.clear();
            const chat = document.getElementById("chat");
            chat.innerHTML = "";

            get(mensajesRef).then((snapshot) => {
                if (snapshot.exists()) {
                    const mensajes = [];
                    snapshot.forEach((childSnapshot) => {
                        mensajes.push({
                            key: childSnapshot.key,
                            ...childSnapshot.val()
                        });
                    });

                    mensajes.sort((a, b) => {
                        if (a.timestamp && b.timestamp) return a.timestamp - b.timestamp;
                        return new Date(a.fecha) - new Date(b.fecha);
                    });

                    mensajes.forEach(mensaje => mostrarMensaje(mensaje));
                }
                window.cargaInicialCompletada = true;
            }).catch(error => {
                console.error("Error al cargar mensajes:", error);
                window.cargaInicialCompletada = true;
            });
        }

        function sanitizarTexto(texto) {
            const div = document.createElement('div');
            div.textContent = texto;
            return div.innerHTML;
        }

        function inicializarReceptorMensajes() {
            const mensajesRef = ref(db, "mensajes");
            window.cargaInicialCompletada = false;
            cargarMensajesIniciales();

            onChildAdded(mensajesRef, function (snapshot) {
                if (window.cargaInicialCompletada) {
                    const data = snapshot.val();
                    mostrarMensaje({
                        key: snapshot.key,
                        ...data
                    });
                }
            });
        }

        document.getElementById("enviarMensaje").addEventListener("click", function () {
            const user = auth.currentUser;
            if (!user) return;

            const mensajesRef = ref(db, "mensajes");
            const mensaje = document.getElementById("mensajeInput").value.trim();

            if (mensaje) {
                const nuevoMensaje = {
                    emailCompleto: user.email,
                    usuario: obtenerNombreMostrado(user.email),
                    mensaje: mensaje,
                    fecha: new Date().toLocaleString(),
                    timestamp: new Date().getTime()
                };

                document.getElementById("mensajeInput").value = "";
                const newRef = push(mensajesRef);
                const messageId = newRef.key;

                mostrarMensaje({
                    key: messageId,
                    ...nuevoMensaje
                });

                set(newRef, nuevoMensaje).catch((error) => {
                    console.error("Error al enviar mensaje:", error);
                });

                resetInactivityTimer();
            }
        });

        window.addEventListener('beforeunload', function() {
            registrarTiempoSesion(usuarioActual);
        });

        document.addEventListener('DOMContentLoaded', function() {
            mensajesMostrados = new Set();
            inicializarEstadoConexion();
            inicializarNotificacionesMensajes();
            inicializarReceptorMensajes();
        });
    </script>
</body>
</html>
